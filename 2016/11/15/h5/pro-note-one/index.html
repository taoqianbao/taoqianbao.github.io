<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>实战H5项目笔记之双11活动页 | 致力于拯救世界的IT农民工</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="实战H5项目笔记">
<meta name="keywords" content="h5,project,note,css,javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="实战H5项目笔记之双11活动页">
<meta property="og:url" content="http://taoqianbao.github.io/2016/11/15/h5/pro-note-one/index.html">
<meta property="og:site_name" content="致力于拯救世界的IT农民工">
<meta property="og:description" content="实战H5项目笔记">
<meta property="og:updated_time" content="2018-01-17T02:26:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="实战H5项目笔记之双11活动页">
<meta name="twitter:description" content="实战H5项目笔记">
  
    <link rel="alternate" href="/atom.xml" title="致力于拯救世界的IT农民工" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <meta name="test" value="{&#34;title&#34;:&#34;致力于拯救世界的IT农民工&#34;,&#34;subtitle&#34;:&#34;朱胜峰的网络事件&#34;,&#34;description&#34;:&#34;I love programming and I am very passionate about it. I have been coding for 10+ years now. Like C,ASP,PHP,C#,JavaScript...&#34;,&#34;author&#34;:&#34;Peter Zhu&#34;,&#34;language&#34;:null,&#34;timezone&#34;:null,&#34;url&#34;:&#34;http://taoqianbao.github.io&#34;,&#34;root&#34;:&#34;/&#34;,&#34;permalink&#34;:&#34;:year/:month/:day/:title/&#34;,&#34;permalink_defaults&#34;:null,&#34;source_dir&#34;:&#34;source&#34;,&#34;public_dir&#34;:&#34;public&#34;,&#34;tag_dir&#34;:&#34;tags&#34;,&#34;archive_dir&#34;:&#34;archives&#34;,&#34;category_dir&#34;:&#34;categories&#34;,&#34;code_dir&#34;:&#34;downloads/code&#34;,&#34;i18n_dir&#34;:&#34;:lang&#34;,&#34;skip_render&#34;:null,&#34;new_post_name&#34;:&#34;:title.md&#34;,&#34;default_layout&#34;:&#34;post&#34;,&#34;titlecase&#34;:false,&#34;external_link&#34;:true,&#34;filename_case&#34;:0,&#34;render_drafts&#34;:false,&#34;post_asset_folder&#34;:false,&#34;relative_link&#34;:false,&#34;future&#34;:true,&#34;highlight&#34;:{&#34;enable&#34;:true,&#34;auto_detect&#34;:false,&#34;line_number&#34;:true,&#34;tab_replace&#34;:null,&#34;first_line_number&#34;:&#34;always1&#34;},&#34;default_category&#34;:&#34;uncategorized&#34;,&#34;category_map&#34;:null,&#34;tag_map&#34;:null,&#34;date_format&#34;:&#34;YYYY-MM-DD&#34;,&#34;time_format&#34;:&#34;HH:mm:ss&#34;,&#34;per_page&#34;:10,&#34;pagination_dir&#34;:&#34;page&#34;,&#34;theme&#34;:&#34;landscape&#34;,&#34;deploy&#34;:{&#34;type&#34;:&#34;git&#34;,&#34;repo&#34;:&#34;https://github.com/taoqianbao/taoqianbao.github.io.git&#34;,&#34;branch&#34;:&#34;master&#34;},&#34;ignore&#34;:[],&#34;index_generator&#34;:{&#34;per_page&#34;:10,&#34;order_by&#34;:&#34;-date&#34;,&#34;path&#34;:&#34;&#34;},&#34;category_generator&#34;:{&#34;per_page&#34;:10},&#34;feed&#34;:{&#34;type&#34;:&#34;atom&#34;,&#34;limit&#34;:20,&#34;hub&#34;:&#34;&#34;,&#34;content&#34;:true,&#34;content_limit&#34;:140,&#34;content_limit_delim&#34;:&#34;&#34;,&#34;path&#34;:&#34;atom.xml&#34;},&#34;archive_generator&#34;:{&#34;per_page&#34;:10,&#34;yearly&#34;:true,&#34;monthly&#34;:true,&#34;daily&#34;:false},&#34;sitemap&#34;:{&#34;path&#34;:&#34;sitemap.xml&#34;},&#34;tag_generator&#34;:{&#34;per_page&#34;:10},&#34;marked&#34;:{&#34;gfm&#34;:true,&#34;pedantic&#34;:false,&#34;sanitize&#34;:false,&#34;tables&#34;:true,&#34;breaks&#34;:true,&#34;smartLists&#34;:true,&#34;smartypants&#34;:true,&#34;modifyAnchors&#34;:&#34;&#34;,&#34;autolink&#34;:true},&#34;server&#34;:{&#34;port&#34;:4000,&#34;log&#34;:false,&#34;ip&#34;:&#34;0.0.0.0&#34;,&#34;compress&#34;:false,&#34;header&#34;:true}}" />
  
    <link href="/source-code-pro/source-code-pro.css" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?fcd070861fea890c12eabf775bd8e240";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner" style="display:none">
      <h1 id="logo-wrap">
        <a href="/" id="logo">致力于拯救世界的IT农民工</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">朱胜峰的网络事件</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About Me</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="https://github.com/taoqianbao">GITHUB(@me)</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://taoqianbao.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-h5/pro-note-one" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/15/h5/pro-note-one/" class="article-date">
  <time datetime="2016-11-15T02:28:21.000Z" itemprop="datePublished">2016-11-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/h5/">h5</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      实战H5项目笔记之双11活动页
    </h1>
  

      </header>
    
    
    <div class="article-entry" itemprop="articleBody">

      
        <h2 id="1-背景"><a href="#1-背景" class="headerlink" title="1. 背景"></a>1. 背景</h2><p>加入实体电商，开始第一个项目，双11活动。 每年参加双11活动，今年第一次自己参与，有点兴奋。</p>
<p>这种活动页面虽然用不上太复杂的逻辑，但也有很多后台项目涉及不到的细节，让我们踩了不少的坑。这里针对项目开发过程中涉及的一些主要技术点作一下总结回顾。</p>
<!-- TOC -->
<ul>
<li><a href="#1-背景">1. 背景</a><ul>
<li><a href="#11-项目特点">1.1. 项目特点</a></li>
<li><a href="#12-slider-实现">1.2. Slider 实现</a></li>
<li><a href="#13-移动屏幕适配">1.3. 移动屏幕适配</a><ul>
<li><a href="#131-高度优先viewport-等比缩放适配方案">1.3.1. 高度优先、viewport 等比缩放适配方案</a></li>
<li><a href="#132-绝对定位元素的微调方法">1.3.2. 绝对定位元素的微调方法</a></li>
<li><a href="#133-设计稿图片等比缩放方法">1.3.3. 设计稿图片等比缩放方法</a></li>
<li><a href="#134-快速布局方法">1.3.4. 快速布局方法</a></li>
</ul>
</li>
<li><a href="#14-html5-动画实现">1.4. HTML5 动画实现</a><ul>
<li><a href="#141-css3-动画">1.4.1. CSS3 动画</a></li>
<li><a href="#142-引入游戏引擎方案">1.4.2. 引入游戏引擎方案</a></li>
<li><a href="#143-使用-svgcanvas-操作库">1.4.3. 使用 svg/canvas 操作库</a></li>
</ul>
</li>
<li><a href="#15-微信分享">1.5. 微信分享</a><ul>
<li><a href="#151-微信-jssdk-分享-api">1.5.1. 微信 jssdk 分享 API</a></li>
<li><a href="#152-不走微信-jssdk-的取巧方法">1.5.2. 不走微信 jssdk 的取巧方法</a></li>
</ul>
</li>
<li><a href="#16-性能优化相关">1.6. 性能优化相关</a><ul>
<li><a href="#161-页面资源异步加载">1.6.1. 页面资源异步加载</a></li>
<li><a href="#162-webp-支持">1.6.2. webp 支持</a></li>
</ul>
</li>
<li><a href="#17-应用内登陆分享">1.7. 应用内登陆/分享</a></li>
<li><a href="#18-工程化问题">1.8. 工程化问题</a></li>
<li><a href="#19-运维发布问题">1.9. 运维发布问题</a></li>
<li><a href="#110-其他">1.10. 其他</a></li>
<li><a href="#111-小结">1.11. 小结</a></li>
</ul>
</li>
<li><a href="#2-关于作者">2. 关于作者</a></li>
</ul>
<!-- /TOC -->
<a id="more"></a>
<h3 id="1-1-项目特点"><a href="#1-1-项目特点" class="headerlink" title="1.1. 项目特点"></a>1.1. 项目特点</h3><ul>
<li>多页滑动效果，页面多，动画元素细节多，动画效果简单</li>
<li>个人页(主页面)需 Flyme 账号登录，自有应用内要尽量实现免登录</li>
<li>将会在魅族主流应用和社区里推广</li>
<li>可分享到微信、微博等主流社交媒体</li>
</ul>
<h3 id="1-2-Slider-实现"><a href="#1-2-Slider-实现" class="headerlink" title="1.2. Slider 实现"></a>1.2. Slider 实现</h3><p>多页翻屏滑动的效果有很多开源的实现，当然希望尽量的简单自己实现也不是很复杂。我们选择的是百度开源的 iSlider，iSlider 是一款非常优秀的翻页滑动组件。除此之外，还有很多成熟的开源实现可选用：</p>
<ul>
<li>swiper <a href="http://www.swiper.com.cn" target="_blank" rel="noopener">http://www.swiper.com.cn</a></li>
<li>iscroll <a href="https://github.com/cubiq/iscroll" target="_blank" rel="noopener">https://github.com/cubiq/iscroll</a></li>
<li>fullpage.js <a href="https://github.com/alvarotrigo/fullPage.js/" target="_blank" rel="noopener">https://github.com/alvarotrigo/fullPage.js/</a></li>
<li>Scrollify <a href="https://github.com/lukehaas/Scrollify" target="_blank" rel="noopener">https://github.com/lukehaas/Scrollify</a></li>
<li>onepage-scroll <a href="https://github.com/peachananr/onepage-scroll" target="_blank" rel="noopener">https://github.com/peachananr/onepage-scroll</a></li>
</ul>
<h3 id="1-3-移动屏幕适配"><a href="#1-3-移动屏幕适配" class="headerlink" title="1.3. 移动屏幕适配"></a>1.3. 移动屏幕适配</h3><p>移动端屏幕适配常用的方案有如下三种：</p>
<ul>
<li>固定高度，宽度自适应</li>
<li>固定宽度/高度，viewport 缩放</li>
<li>rem 做宽度，viewport 缩放</li>
</ul>
<h4 id="1-3-1-高度优先、viewport-等比缩放适配方案"><a href="#1-3-1-高度优先、viewport-等比缩放适配方案" class="headerlink" title="1.3.1. 高度优先、viewport 等比缩放适配方案"></a>1.3.1. 高度优先、viewport 等比缩放适配方案</h4><p>因为涉及多页大量的动画元素，只能是绝对定位来快速布局，我们采取了第二种方案：页面以 320x640 作为基础大小布局，在移动端根据实际的页面大小等比缩放。主要适配代码参考：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">+<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isMobile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobi/i</span>.test(navigator.userAgent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setScale</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> pageScale = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.top !== <span class="built_in">window</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> pageScale;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> width = <span class="built_in">document</span>.documentElement.clientWidth || <span class="number">360</span>;</span><br><span class="line">        <span class="keyword">var</span> height = <span class="built_in">document</span>.documentElement.clientHeight || <span class="number">640</span>;</span><br><span class="line">        <span class="keyword">if</span> (width / height &gt;= <span class="number">360</span> / <span class="number">640</span>) &#123;</span><br><span class="line">            <span class="comment">// 高度优先</span></span><br><span class="line">            pageScale = height / <span class="number">640</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pageScale = width / <span class="number">360</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> content = <span class="string">'width='</span> + <span class="number">360</span> + <span class="string">', initial-scale='</span> + pageScale </span><br><span class="line">          + <span class="string">', maximum-scale='</span> + pageScale + <span class="string">', user-scalable=no'</span>;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'viewport'</span>).setAttribute(<span class="string">'content'</span>, content);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pageScale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isMobile()) &#123;</span><br><span class="line">        setScale();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">document</span>.getElementsByTagName(<span class="string">'html'</span>)[<span class="number">0</span>].classList.add(<span class="string">'pc'</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种方案以高度优先，以使得全部内容都能够出现在可视区域。但有一个问题是，在 webview 内宽高比大于 9/16，于是实际采用了高度的比例缩放，基础宽度缩放后会小于屏幕宽度，由于涉及动画的元素采用了绝对定位，这导致这些元素显示上偏左，右边出现较多的空白。</p>
<h4 id="1-3-2-绝对定位元素的微调方法"><a href="#1-3-2-绝对定位元素的微调方法" class="headerlink" title="1.3.2. 绝对定位元素的微调方法"></a>1.3.2. 绝对定位元素的微调方法</h4><p>对于这种问题，一种简单快速的解决方案：取得基础宽度与真实宽度的缩放比，将所有绝对定位的元素按照该缩放比重新计算 left 位移。主要代码参考：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'./libs/zepto'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> width = <span class="built_in">document</span>.documentElement.clientWidth || <span class="number">360</span>;</span><br><span class="line"><span class="keyword">const</span> height = <span class="built_in">document</span>.documentElement.clientHeight || <span class="number">640</span>;</span><br><span class="line"><span class="keyword">let</span> pageScale = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (width / height &gt;= <span class="number">360</span> / <span class="number">640</span>) &#123;</span><br><span class="line">    pageScale = height / <span class="number">640</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> offset = (width - pageScale * <span class="number">360</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 每当页面切换后调用</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">positionFix</span>(<span class="params">dom</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (pageScale === <span class="number">1</span> || !offset) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为一个页面</span></span><br><span class="line">    <span class="keyword">const</span> $dom = $(dom);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($dom.hasClass(<span class="string">'position-fixed'</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $dom.find(<span class="string">'.text-box i, img'</span>).forEach(<span class="function">(<span class="params">dom, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> $<span class="keyword">this</span> = $(dom),</span><br><span class="line">            left;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 只修改绝对定位的元素</span></span><br><span class="line">        <span class="keyword">if</span> ($<span class="keyword">this</span>.css(<span class="string">'position'</span>) !== <span class="string">'absolute'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        left = +($<span class="keyword">this</span>.css(<span class="string">'left'</span>).replace(<span class="string">'px'</span>, <span class="string">''</span>));</span><br><span class="line"></span><br><span class="line">        $<span class="keyword">this</span>.css(<span class="string">'left'</span>, (left + offset) + <span class="string">'px'</span>);</span><br><span class="line">        <span class="comment">// console.log($(dom).css('left'));</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $dom.addClass(<span class="string">'position-fixed'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="1-3-3-设计稿图片等比缩放方法"><a href="#1-3-3-设计稿图片等比缩放方法" class="headerlink" title="1.3.3. 设计稿图片等比缩放方法"></a>1.3.3. 设计稿图片等比缩放方法</h4><p>页面缩放解决了不同屏幕大小的布局一致性。另外涉及的一个问题是，设计稿图片大小如何进行等比缩放？<br>这个问题也很简单，图片引用直接设置 width 以缩放到合适大小；雪碧图上的图片则按照 360×640 的页面大小进行缩放：</p>
<ul>
<li>对于绝对定位的元素，使用 <font color="red">transform: scale(0.333)</font> 进行变换缩放</li>
<li>对于流式布局的元素，使用 <font color="red">zomm(0.333)</font> 进行缩放</li>
</ul>
<h4 id="1-3-4-快速布局方法"><a href="#1-3-4-快速布局方法" class="headerlink" title="1.3.4. 快速布局方法"></a>1.3.4. 快速布局方法</h4><p>还有一个值得一提的问题是，如何做到布局元素与设计稿完全一致？</p>
<p>这个问题的解决方法是：使用静态的设计稿图片作为全屏背景，通过调整各元素到对应位置，从而实现快速定位。我们的一位同学给出了这个方法，并且给出了一个让页面元素可拖动并设置最终位置(left/right值)的 jQuery 插件，这使得我们的页面布局变得简单而高效。</p>
<h3 id="1-4-HTML5-动画实现"><a href="#1-4-HTML5-动画实现" class="headerlink" title="1.4. HTML5 动画实现"></a>1.4. HTML5 动画实现</h3><p>动画实现方案一般来说可以选择CSS3 动画、引入游戏引擎或使用 svg/canvas。</p>
<h4 id="1-4-1-CSS3-动画"><a href="#1-4-1-CSS3-动画" class="headerlink" title="1.4.1. CSS3 动画"></a>1.4.1. CSS3 动画</h4><p>该方案技术成本简单，任何前端开发者都能快速上手，但细节实现上工作量大。</p>
<p>从简单快速开始的角度来说，CSS3 动画是我们的唯一选择。使用 CSS3 动画需要特别注意一点：修改 DOM 会导致页面重绘，在移动端容易出现卡顿现象。所以应尽可能避免使用会修改 DOM 的 css 属性，只使用 <font color="red">transform</font> 实现动画变换效果。</p>
<p>我们的页面动画都是循环运动的，全部需要对照动效设计逐一还原实现，花费了大量的人力和时间成本。实现上主要使用了 <font color="red">animation</font>、<font color="red">keyframe</font>、<font color="red">transform</font> 属性。</p>
<p>此外，对于常见的入场显示/滑入等动画效果，只需要使用 <font color="red">transformc</font> 和 <font color="red">transition</font> 即可实现需求。对于 css 动画也有很多优秀而成熟的动画库可用，一些参考：</p>
<ul>
<li>animate.css <a href="https://github.com/daneden/animate.css" target="_blank" rel="noopener">https://github.com/daneden/animate.css</a></li>
<li>magic.css <a href="https://github.com/miniMAC/magic" target="_blank" rel="noopener">https://github.com/miniMAC/magic</a></li>
<li>Hover.css <a href="http://ianlunn.github.io/Hover/" target="_blank" rel="noopener">http://ianlunn.github.io/Hover/</a></li>
<li>velocity.js <a href="https://github.com/julianshapiro/velocity" target="_blank" rel="noopener">https://github.com/julianshapiro/velocity</a></li>
<li>anime.js <a href="https://github.com/juliangarnier/anime" target="_blank" rel="noopener">https://github.com/juliangarnier/anime</a></li>
</ul>
<p>下面简单介绍一下另外的两种动画实现方案。</p>
<h4 id="1-4-2-引入游戏引擎方案"><a href="#1-4-2-引入游戏引擎方案" class="headerlink" title="1.4.2. 引入游戏引擎方案"></a>1.4.2. 引入游戏引擎方案</h4><p>使用 h5 游戏引擎可大幅度降低工作量，能够相对容易地实现复杂动画效果，但需要经验避免入深坑，有较高学习成本，并且需要设计师深度配合。一些参考：</p>
<ul>
<li>Hilo <a href="https://github.com/hiloteam/Hilo" target="_blank" rel="noopener">https://github.com/hiloteam/Hilo</a></li>
<li>Phaser <a href="https://github.com/photonstorm/phaser" target="_blank" rel="noopener">https://github.com/photonstorm/phaser</a></li>
<li>pixi.js <a href="https://github.com/pixijs/pixi.js" target="_blank" rel="noopener">https://github.com/pixijs/pixi.js</a></li>
<li>melonjs <a href="https://github.com/melonjs/melonjs" target="_blank" rel="noopener">https://github.com/melonjs/melonjs</a></li>
<li>playcanvas <a href="https://github.com/playcanvas/engine" target="_blank" rel="noopener">https://github.com/playcanvas/engine</a></li>
<li>LayaAir <a href="http://www.layabox.com" target="_blank" rel="noopener">http://www.layabox.com</a></li>
<li>白鹭引擎 <a href="https://www.egret.com" target="_blank" rel="noopener">https://www.egret.com</a></li>
</ul>
<h4 id="1-4-3-使用-svg-canvas-操作库"><a href="#1-4-3-使用-svg-canvas-操作库" class="headerlink" title="1.4.3. 使用 svg/canvas 操作库"></a>1.4.3. 使用 svg/canvas 操作库</h4><p>使用 svg/canvas/webGL 实现的动画效果会比较好，但实现工作量较大，对实践经验也有较高的要求。成熟的相关库参考：</p>
<ul>
<li>createJs <a href="https://github.com/CreateJS" target="_blank" rel="noopener">https://github.com/CreateJS</a></li>
<li>snap.svg <a href="https://github.com/adobe-webplatform/Snap.svg" target="_blank" rel="noopener">https://github.com/adobe-webplatform/Snap.svg</a></li>
<li>svg.js <a href="https://github.com/svgdotjs/svg.js" target="_blank" rel="noopener">https://github.com/svgdotjs/svg.js</a></li>
<li>d3.js <a href="https://d3js.org" target="_blank" rel="noopener">https://d3js.org</a></li>
<li>threes.js <a href="https://threejs.org" target="_blank" rel="noopener">https://threejs.org</a></li>
</ul>
<h3 id="1-5-微信分享"><a href="#1-5-微信分享" class="headerlink" title="1.5. 微信分享"></a>1.5. 微信分享</h3><p>由于第一次做这种活动页，没有特别注意到微信内分享的问题，直到上线时才发现，分享出去的效果实在太难看，这导致几位留守到最后的同事紧急探讨协调方案，几乎整晚没睡觉。</p>
<h4 id="1-5-1-微信-jssdk-分享-API"><a href="#1-5-1-微信-jssdk-分享-API" class="headerlink" title="1.5.1. 微信 jssdk 分享 API"></a>1.5.1. 微信 jssdk 分享 API</h4><p>微信内开发应注意这几点：</p>
<ul>
<li>下载微信开发者工具（或 TBS Studio），以调试微信内页面</li>
<li>需要通过认证的公众号或订阅号，取得微信 jssdk 分享接口所需的 appId 和 signature</li>
<li>需要后端 API 管理 signature 签名的生成与缓存</li>
<li>window.history.pushState/replaceState 修改了 URL 时需要重新生成 signature 签名。由于没有仔细阅读文档并意识到这一点，在这个问题上坑了比较多的时间。</li>
</ul>
<p>我们最终协调到一个部门的订阅号，并使用他们已实现了的后端 token 签名生成 API 来实现 jssdk 的分享 API，在 nginx 层对该 API 代理转发解决跨域安全性相关问题。微信分享主要代码参考：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isWeixinBrowser = <span class="regexp">/micromessenger/</span>.test(navigator.userAgent.toLowerCase());</span><br><span class="line"><span class="keyword">const</span> wxJsdk = <span class="string">'//res.wx.qq.com/open/js/jweixin-1.1.0.js'</span>;</span><br><span class="line"><span class="keyword">const</span> jsApiList = [<span class="string">'checkJsApi'</span>, <span class="string">'onMenuShareTimeline'</span>, <span class="string">'onMenuShareAppMessage'</span>, <span class="string">'onMenuShareQQ'</span>, <span class="string">'onMenuShareWeibo'</span>];</span><br><span class="line"><span class="keyword">let</span> opts = &#123;</span><br><span class="line">    title: <span class="string">'My Flyme 独家记忆'</span>,</span><br><span class="line">    desc: <span class="string">'当时光凝固，当回忆定格。回首2016 ，我与 Flyme 的点点滴滴都在这里。这是属于我和 Flyme 的独家记忆。'</span>,</span><br><span class="line">    link: <span class="string">''</span>,</span><br><span class="line">    imgUrl: <span class="string">''</span></span><br><span class="line">&#125;, loadedwx = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initShareEvent</span>(<span class="params">wx</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> option = &#123;</span><br><span class="line">        ...opts,</span><br><span class="line">        trigger: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">'trigger'</span>, res)&#125;,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'已分享'</span>, res) &#125;,</span><br><span class="line">        cancel: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'已取消'</span>, res) &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(res)) &#125; </span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    wx.onMenuShareAppMessage(option); <span class="comment">// 分享给朋友</span></span><br><span class="line">    wx.onMenuShareTimeline(option);   <span class="comment">// 分享到朋友圈</span></span><br><span class="line">    wx.onMenuShareQQ(option);         <span class="comment">// 分享到QQ</span></span><br><span class="line">    wx.onMenuShareWeibo(option);      <span class="comment">// 分享到微博</span></span><br><span class="line">    wx.onMenuShareQZone(option);      <span class="comment">// 分享到QZone</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkJsApi</span>(<span class="params">wx</span>) </span>&#123;</span><br><span class="line">    wx.checkJsApi(&#123;</span><br><span class="line">        jsApiList,</span><br><span class="line">        success: <span class="function"><span class="params">()</span> =&gt;</span> initShareEvent(wx),</span><br><span class="line">        error: <span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'checkJsApi error: '</span>, err)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initConfig</span>(<span class="params">wx</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 特别注意，这里 link 必须使用当前页面的 URL 地址，否则会失败！</span></span><br><span class="line">    opts.link = <span class="built_in">encodeURIComponent</span>(<span class="built_in">document</span>.location.href.split(<span class="string">'#'</span>)[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> $.ajax(&#123;</span><br><span class="line">        url: <span class="string">'/wechat_api/get_js_ticket?&amp;url='</span> + opts.link,</span><br><span class="line">        dataType:<span class="string">'jsonp'</span>, <span class="comment">//指定为jsonp类型</span></span><br><span class="line">        jsonp:<span class="string">'callback'</span></span><br><span class="line">    &#125;).done(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.config(&#123;</span><br><span class="line">            debug: process.env.NODE_ENV === <span class="string">'development'</span>,</span><br><span class="line">            appId: <span class="string">'wx0000000000000000'</span>,</span><br><span class="line">            nonceStr: res.data.nonceStr,</span><br><span class="line">            timestamp: res.data.timestamp,</span><br><span class="line">            signature: res.data.signature,</span><br><span class="line">            jsApiList</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> options =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (loadedwx || !isWeixinBrowser) &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">require</span>([wxJsdk], (wx) =&gt; &#123;</span><br><span class="line">        loadedwx = <span class="literal">true</span>;</span><br><span class="line">        $.extend(<span class="literal">true</span>, opts, options);</span><br><span class="line">        initConfig(wx);</span><br><span class="line">        wx.ready(<span class="function"><span class="params">()</span> =&gt;</span> checkJsApi(wx));</span><br><span class="line">        wx.error(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="built_in">console</span>.error(<span class="string">'出错了：'</span>, res.errMsg));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-5-2-不走微信-jssdk-的取巧方法"><a href="#1-5-2-不走微信-jssdk-的取巧方法" class="headerlink" title="1.5.2. 不走微信 jssdk 的取巧方法"></a>1.5.2. 不走微信 jssdk 的取巧方法</h4><p>微信分享 API 需要公众号或订阅号，临时的活动开发可能来不及折腾，那么一个折中的办法是这样的：在页面头部 img 标签设置分享显示的图片，设置高度和宽度为 0。示例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">"assets/webp/share.webp"</span> style=<span class="string">"width:0;height:0;overflow:hidden"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>微信会提取页面标题和第一张图片，作为朋友圈分享的标题和缩略图。使用 jssdk 方式分享到朋友圈的效果也是只有标题和缩略图，所以效果上没有区别。比较大的区别是，“发送给好友”时没有描述，描述位置变成了页面 URL 地址。</p>
<h3 id="1-6-性能优化相关"><a href="#1-6-性能优化相关" class="headerlink" title="1.6. 性能优化相关"></a>1.6. 性能优化相关</h3><p>由于时间紧而且设计稿是逐步给到的，很多细节的优化都没法去做。最终上线的版本首屏大小约 1.3M，在弱网下的加载时间会比较久一些，可优化空间还比较大。这里探讨一下我们主要考虑到的几个点。</p>
<h4 id="1-6-1-页面资源异步加载"><a href="#1-6-1-页面资源异步加载" class="headerlink" title="1.6.1. 页面资源异步加载"></a>1.6.1. 页面资源异步加载</h4><p>一共二十多个页面，我们按每页一个 html 模板和一个 less 文件的方式，按页面分工开发，在 index.html 页面以 script 模板方式引入，由 fis3 实现模板嵌入。通过 ajax 拿到数据后，根据数据替换模板中的数据占位符，并进行页面切割，然后生成 iSlider 需要的数据配置项。这样做的好处是 html 内容未写入到 DOM 时，涉及的静态资源图片不会被加载。</p>
<p>iSlider 默认至少加载 3 个页面，每一时刻也最多保存三个页面实例。于是首屏加载了三个页面，这正好符合我们的目的。</p>
<p>另外要提到的一点是，弱网下不同图片下载的时差较大，会使得不同位置的图片动画断断续续地出现。为了避免这种不好的效果，我们使用了一个简单的图片预加载机制，在预加载完首屏涉及的图片资源后才隐藏 loading 显示页面。</p>
<h4 id="1-6-2-webp-支持"><a href="#1-6-2-webp-支持" class="headerlink" title="1.6.2. webp 支持"></a>1.6.2. webp 支持</h4><p>该项目涉及图片资源 500 多张，只有手绘文字图片做了雪碧图处理。现在的移动端基本都支持 webp，使用 webp 是必须的。实际上使用 webp 后，图片目录的大小减小了 60%。</p>
<p>以前大家都是用智图这种在线工具处理少量的图片，搜索了一下，居然没有找到现成的批量生成 webp 的工具库，于是写了一个批量生成方法。这两天整理完善了一下，算是造了一个小轮子，需要的同学可以关注下，地址在这里：</p>
<p>webp 批量转换：<a href="https://github.com/lzwme/webp-batch-convert" target="_blank" rel="noopener">https://github.com/lzwme/webp-batch-convert</a></p>
<p>更新：有同学提到了，imagemin 提供的插件 imagemin-webp 也可以实现类似的需求。看了项目源码，实现的原理是一样的，其仓库地址为： <a href="https://github.com/imagemin/imagemin-webp" target="_blank" rel="noopener">https://github.com/imagemin/imagemin-webp</a></p>
<h3 id="1-7-应用内登陆-分享"><a href="#1-7-应用内登陆-分享" class="headerlink" title="1.7. 应用内登陆/分享"></a>1.7. 应用内登陆/分享</h3><p>由于要在 Flyme 自带的近十个主要应用内作推广入口，涉及到两个问题：应用内分享和应用内免登录。</p>
<p>在协调这一块时发现，各应用都是独自制定的各不相同的 webview 内相关 js 接口和规范，同一应用不同版本的实现也可能有差异，或者根本没有相关实现；有规范的文档也不够齐全，并且都没有示例参考；没有各应用的开发测试版本来做调试。于是花了不少时间各种咨询，踩了不少的坑，效果也还是不尽人意，最终只在魅族浏览器上做到了期望的效果。</p>
<p>没有统一规范，各自造轮子，于是这种跨部门跨应用的功能需求变得如此艰难。导致这种现象的存在因素很多，可知的一点是也和公司内前端人员处于边缘化地位的现实有关。过去的一年里，基础技术支撑部门技术平台做了一套 hybridApp 解决方案，@chemdemo 同学还将 JSBridge 部分抽离开源了出来：<a href="https://github.com/chemdemo/hybrid-js" target="_blank" rel="noopener">https://github.com/chemdemo/hybrid-js</a> 。可能是缺少高层足够的相关意识和支持力度，并没有在各业务软件内得到广泛应用，反而主要靠内部前端圈间沟通传播。不过这套方案为了简洁只实现了很少的通用 API 和可扩展方法，并没有继续实现各种业务适用的通用性扩展功能，自然也没有我们想要的应用内分享和 Flyme 免登录这两个功能。</p>
<p>对于这个问题有两点总结： </p>
<ul>
<li>统一的公共 SDK 的重要性：避免重复造轮子，健壮且具有一致性的 API、完善的文档。</li>
<li>再好的文档不如一个 demo</li>
</ul>
<h3 id="1-8-工程化问题"><a href="#1-8-工程化问题" class="headerlink" title="1.8. 工程化问题"></a>1.8. 工程化问题</h3><p>项目初期使用 webpack 进行构建，但由于我们平时的经验以 fis3 为主，webpack 过于灵活的配置特性使得一些工程化需求需要花时间探索。在我们接手项目后一起讨论了一下，果断转为熟悉的 fis3 构建体系。使用 fis3 主要解决的问题有：</p>
<ul>
<li>less 编译</li>
<li>es6 编译</li>
<li>js/css 压缩合并</li>
<li>页面模板嵌入</li>
<li>发布时 CDN 单独域名的适配</li>
<li>发布时符合内部运维体系线上发布规范的目录路径修正</li>
</ul>
<p>相比较为灵活的 webpack，fis3 更注重流程化整体解决方案，简单的数十行配置即可实现各种工程化需求。不过 fis3 的发展现在似乎进入了一个瓶颈期/稳定期，社区中对于在 rollup 和 webpack 中大热的 tree-shaking 等技术几乎都没有什么反应。希望它不要没落了，能有更多的创新吧。有两点期望：走国际化路线，出英文文档与社区支持，向国际顶级项目看进；跟进参考业界最新的工程化理念，如有必要出个 fis4 也未尝不可。</p>
<h3 id="1-9-运维发布问题"><a href="#1-9-运维发布问题" class="headerlink" title="1.9. 运维发布问题"></a>1.9. 运维发布问题</h3><p>由于涉及到跨部门合作，也没有太多的时间，项目起初放在了内部的 <strong><em> gitlab </em></strong> 平台，没有走 git+gerrit+jenkins+运维发布平台 这一内部完整的体系。这样做在前期省去了项目创建、各种权限申请等一堆需要协调沟通的事情，开发协作效率也比较高，但到了发布的阶段就突显出了问题：每次发布都需要由运维人员手动操作，协调发布很花费时间。</p>
<p>另外静态页面也没有独立出来，想当然地简单的扔到后端目录中，结果导致前端的修改需要后端也必须作修改发布，增加了前后端协调的时间成本。</p>
<p>于是，在首次发布后又进行的几次小迭代中，每次迭代发布都涉及到多人手动协调，十分的浪费时间。</p>
<p>总结一句话：项目构建尽量与已有的成熟的规范一致，以少走弯路。</p>
<h3 id="1-10-其他"><a href="#1-10-其他" class="headerlink" title="1.10. 其他"></a>1.10. 其他</h3><p>最后列举一些移动端 H5 开发可参考的内容：</p>
<ul>
<li>真机调试 <a href="https://github.com/jieyou/remote_inspect_web_on_real_device" target="_blank" rel="noopener">https://github.com/jieyou/remote_inspect_web_on_real_device</a></li>
<li>vConsole: 客户端内 H5 调试 <a href="https://github.com/WechatFE/vConsole" target="_blank" rel="noopener">https://github.com/WechatFE/vConsole</a></li>
<li>移动端布局终极解决方案 <a href="https://github.com/imochen/hotcss" target="_blank" rel="noopener">https://github.com/imochen/hotcss</a></li>
<li>mobileHack <a href="https://github.com/RubyLouvre/mobileHack" target="_blank" rel="noopener">https://github.com/RubyLouvre/mobileHack</a></li>
<li>H5项目常见问题汇总及解决方案 <a href="https://github.com/FrontEndRoad/HTML5-FAQ" target="_blank" rel="noopener">https://github.com/FrontEndRoad/HTML5-FAQ</a></li>
</ul>
<h3 id="1-11-小结"><a href="#1-11-小结" class="headerlink" title="1.11. 小结"></a>1.11. 小结</h3><p>这是我们第一次尝试这种活动页，在如此紧凑的时间节点下，没有什么高大上的东西，更多的是各种采坑尝试的实践过程。以上列举的内容算是对本次开发实践做一个总结记录，采用的相关实现方案也可作后续参考。欢迎探讨分享你们的经验。</p>
<h2 id="2-关于作者"><a href="#2-关于作者" class="headerlink" title="2. 关于作者"></a>2. 关于作者</h2><p>** 珠峰<br>WEB开发与管理相结合，注重技术与应用结合。现居上海。 </p>

      

    </div>
    <footer class="article-footer">
      <a data-url="http://taoqianbao.github.io/2016/11/15/h5/pro-note-one/" data-id="cjddupuse000d5se3chrvmvra" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/h5/">h5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/note/">note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/project/">project</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/17/javascript/vue-lifecycle/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Vue框架之生命周期
        
      </div>
    </a>
  
  
    <a href="/2016/11/15/javascript/plugins-one/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">WEB开发常见效果插件收藏整理</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C#</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/H5/">H5</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ITPMP/">ITPMP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TechManage/">TechManage</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/h5/">h5</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lesson/">lesson</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/links/">links</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/macos/">macos</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/小程序/">小程序</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2017/">2017</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AMD/">AMD</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARIA/">ARIA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMD/">CMD</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/">H5</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5/">HTML5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ITPMP/">ITPMP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOJ/">OOJ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB/">WEB</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apply/">apply</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/call/">call</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/commonjs/">commonjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concepts/">concepts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/defer/">defer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dialog/">dialog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventloop/">eventloop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flex/">flex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/">frontend</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/h5/">h5</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/">interview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lesson/">lesson</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lifecycle/">lifecycle</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/">macos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/media/">media</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/news/">news</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/note/">note</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package/">package</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/path/">path</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/performance/">performance</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pg/">pg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugins/">plugins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position/">position</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/preload/">preload</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project/">project</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/queue/">queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rem/">rem</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snippet/">snippet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/">sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sticky/">sticky</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewport/">viewport</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/worker/">worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码段/">代码段</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化/">优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/备份/">备份</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能/">性能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/理想/">理想</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/策略/">策略</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/问题/">问题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/题目/">题目</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2017/" style="font-size: 10px;">2017</a> <a href="/tags/AMD/" style="font-size: 11.43px;">AMD</a> <a href="/tags/ARIA/" style="font-size: 10px;">ARIA</a> <a href="/tags/C/" style="font-size: 10px;">C#</a> <a href="/tags/CMD/" style="font-size: 11.43px;">CMD</a> <a href="/tags/CSS/" style="font-size: 11.43px;">CSS</a> <a href="/tags/ES6/" style="font-size: 11.43px;">ES6</a> <a href="/tags/H5/" style="font-size: 14.29px;">H5</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/ITPMP/" style="font-size: 10px;">ITPMP</a> <a href="/tags/JS/" style="font-size: 15.71px;">JS</a> <a href="/tags/Javascript/" style="font-size: 18.57px;">Javascript</a> <a href="/tags/OOJ/" style="font-size: 12.86px;">OOJ</a> <a href="/tags/OOP/" style="font-size: 12.86px;">OOP</a> <a href="/tags/WEB/" style="font-size: 12.86px;">WEB</a> <a href="/tags/apply/" style="font-size: 10px;">apply</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/call/" style="font-size: 10px;">call</a> <a href="/tags/commonjs/" style="font-size: 11.43px;">commonjs</a> <a href="/tags/concepts/" style="font-size: 10px;">concepts</a> <a href="/tags/css/" style="font-size: 12.86px;">css</a> <a href="/tags/defer/" style="font-size: 10px;">defer</a> <a href="/tags/dialog/" style="font-size: 10px;">dialog</a> <a href="/tags/eventloop/" style="font-size: 10px;">eventloop</a> <a href="/tags/flex/" style="font-size: 10px;">flex</a> <a href="/tags/frontend/" style="font-size: 10px;">frontend</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/h5/" style="font-size: 12.86px;">h5</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/js/" style="font-size: 11.43px;">js</a> <a href="/tags/lesson/" style="font-size: 10px;">lesson</a> <a href="/tags/lifecycle/" style="font-size: 11.43px;">lifecycle</a> <a href="/tags/macos/" style="font-size: 10px;">macos</a> <a href="/tags/media/" style="font-size: 11.43px;">media</a> <a href="/tags/news/" style="font-size: 10px;">news</a> <a href="/tags/note/" style="font-size: 10px;">note</a> <a href="/tags/package/" style="font-size: 10px;">package</a> <a href="/tags/path/" style="font-size: 10px;">path</a> <a href="/tags/performance/" style="font-size: 11.43px;">performance</a> <a href="/tags/pg/" style="font-size: 10px;">pg</a> <a href="/tags/plugins/" style="font-size: 10px;">plugins</a> <a href="/tags/position/" style="font-size: 10px;">position</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/preload/" style="font-size: 10px;">preload</a> <a href="/tags/project/" style="font-size: 10px;">project</a> <a href="/tags/queue/" style="font-size: 10px;">queue</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/rem/" style="font-size: 10px;">rem</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/snippet/" style="font-size: 10px;">snippet</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/sticky/" style="font-size: 10px;">sticky</a> <a href="/tags/viewport/" style="font-size: 10px;">viewport</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/web/" style="font-size: 17.14px;">web</a> <a href="/tags/worker/" style="font-size: 10px;">worker</a> <a href="/tags/代码段/" style="font-size: 10px;">代码段</a> <a href="/tags/优化/" style="font-size: 10px;">优化</a> <a href="/tags/备份/" style="font-size: 10px;">备份</a> <a href="/tags/小程序/" style="font-size: 10px;">小程序</a> <a href="/tags/性能/" style="font-size: 10px;">性能</a> <a href="/tags/理想/" style="font-size: 10px;">理想</a> <a href="/tags/策略/" style="font-size: 10px;">策略</a> <a href="/tags/问题/" style="font-size: 10px;">问题</a> <a href="/tags/面试/" style="font-size: 14.29px;">面试</a> <a href="/tags/题目/" style="font-size: 12.86px;">题目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/12/">December 2006</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/08/miniapp/how-to-study/">小程序开发之入门基础知识</a>
          </li>
        
          <li>
            <a href="/2018/02/02/javascript/javascript-concepts/">必须知道的javascript概念题</a>
          </li>
        
          <li>
            <a href="/2018/01/18/h5/links-fe/">前端技术文章导航整理</a>
          </li>
        
          <li>
            <a href="/2018/01/17/h5/aria-role/">HTML5 ARIA role</a>
          </li>
        
          <li>
            <a href="/2018/01/11/sql/postgresql-one/">postgresql安装环境</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Peter Zhu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About Me</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="https://github.com/taoqianbao" class="mobile-nav-link">GITHUB(@me)</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>